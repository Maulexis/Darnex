{"ast":null,"code":"var _jsxFileName = \"/Users/daksh/Downloads/Personal/Railway SIH/Darnex/railway-frontend/src/RailwayMap.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport svgMap from \"./railsvgmap.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RailwayMap() {\n  _s();\n  const [trains, setTrains] = useState([]);\n\n  // Fetch updates every 5s\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await fetch(\"http://localhost:3001/api/map-layout\");\n        const data = await res.json();\n        setTrains(data.trains || []);\n      } catch (err) {\n        console.error(\"Error fetching trains:\", err);\n      }\n    };\n    fetchData();\n    const interval = setInterval(fetchData, 5000);\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDE86 Railway Live Map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"relative\",\n        display: \"inline-block\",\n        width: \"100%\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        id: \"railway-svg\",\n        src: svgMap,\n        alt: \"Railway Map\",\n        style: {\n          width: \"100%\",\n          display: \"block\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n        style: {\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          width: \"100%\",\n          height: \"100%\"\n        },\n        children: trains.map(train => {\n          const path = document.getElementById(`track-${train.track_id}`);\n          let cx = 50,\n            cy = 50;\n          if (path) {\n            const totalLength = path.getTotalLength();\n            const pos = Math.min(train.position_km * 50, totalLength); // scale km â†’ px\n            const point = path.getPointAtLength(pos);\n            cx = point.x;\n            cy = point.y;\n          }\n          return /*#__PURE__*/_jsxDEV(\"circle\", {\n            cx: cx,\n            cy: cy,\n            r: 6,\n            fill: \"red\",\n            children: /*#__PURE__*/_jsxDEV(\"title\", {\n              children: [\"Train \", train.train_id, \" \\u2014 \", train.position_km.toFixed(2), \" km @ \", train.speed_kmph, \" km/h\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 44,\n              columnNumber: 17\n            }, this)\n          }, train.train_id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n}\n_s(RailwayMap, \"b108wzI25qLIUDtvQA3yPWDuTsA=\");\n_c = RailwayMap;\nvar _c;\n$RefreshReg$(_c, \"RailwayMap\");","map":{"version":3,"names":["React","useEffect","useState","svgMap","jsxDEV","_jsxDEV","RailwayMap","_s","trains","setTrains","fetchData","res","fetch","data","json","err","console","error","interval","setInterval","clearInterval","style","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","position","display","width","id","src","alt","top","left","height","map","train","path","document","getElementById","track_id","cx","cy","totalLength","getTotalLength","pos","Math","min","position_km","point","getPointAtLength","x","y","r","fill","train_id","toFixed","speed_kmph","_c","$RefreshReg$"],"sources":["/Users/daksh/Downloads/Personal/Railway SIH/Darnex/railway-frontend/src/RailwayMap.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport svgMap from \"./railsvgmap.svg\";\n\nexport default function RailwayMap() {\n  const [trains, setTrains] = useState([]);\n\n  // Fetch updates every 5s\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await fetch(\"http://localhost:3001/api/map-layout\");\n        const data = await res.json();\n        setTrains(data.trains || []);\n      } catch (err) {\n        console.error(\"Error fetching trains:\", err);\n      }\n    };\n\n    fetchData();\n    const interval = setInterval(fetchData, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div style={{ textAlign: \"center\" }}>\n      <h2>ðŸš† Railway Live Map</h2>\n      <div style={{ position: \"relative\", display: \"inline-block\", width: \"100%\" }}>\n        <img id=\"railway-svg\" src={svgMap} alt=\"Railway Map\" style={{ width: \"100%\", display: \"block\" }} />\n        <svg style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\" }}>\n          {trains.map((train) => {\n            const path = document.getElementById(`track-${train.track_id}`);\n            let cx = 50, cy = 50;\n\n            if (path) {\n              const totalLength = path.getTotalLength();\n              const pos = Math.min(train.position_km * 50, totalLength); // scale km â†’ px\n              const point = path.getPointAtLength(pos);\n              cx = point.x;\n              cy = point.y;\n            }\n\n            return (\n              <circle key={train.train_id} cx={cx} cy={cy} r={6} fill=\"red\">\n                <title>\n                  Train {train.train_id} â€” {train.position_km.toFixed(2)} km @ {train.speed_kmph} km/h\n                </title>\n              </circle>\n            );\n          })}\n        </svg>\n      </div>\n    </div>\n  );\n}\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,MAAM,MAAM,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtC,eAAe,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACnC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;;EAExC;EACAD,SAAS,CAAC,MAAM;IACd,MAAMS,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,sCAAsC,CAAC;QAC/D,MAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;QAC7BL,SAAS,CAACI,IAAI,CAACL,MAAM,IAAI,EAAE,CAAC;MAC9B,CAAC,CAAC,OAAOO,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC9C;IACF,CAAC;IAEDL,SAAS,CAAC,CAAC;IACX,MAAMQ,QAAQ,GAAGC,WAAW,CAACT,SAAS,EAAE,IAAI,CAAC;IAC7C,OAAO,MAAMU,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEb,OAAA;IAAKgB,KAAK,EAAE;MAAEC,SAAS,EAAE;IAAS,CAAE;IAAAC,QAAA,gBAClClB,OAAA;MAAAkB,QAAA,EAAI;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC5BtB,OAAA;MAAKgB,KAAK,EAAE;QAAEO,QAAQ,EAAE,UAAU;QAAEC,OAAO,EAAE,cAAc;QAAEC,KAAK,EAAE;MAAO,CAAE;MAAAP,QAAA,gBAC3ElB,OAAA;QAAK0B,EAAE,EAAC,aAAa;QAACC,GAAG,EAAE7B,MAAO;QAAC8B,GAAG,EAAC,aAAa;QAACZ,KAAK,EAAE;UAAES,KAAK,EAAE,MAAM;UAAED,OAAO,EAAE;QAAQ;MAAE;QAAAL,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACnGtB,OAAA;QAAKgB,KAAK,EAAE;UAAEO,QAAQ,EAAE,UAAU;UAAEM,GAAG,EAAE,CAAC;UAAEC,IAAI,EAAE,CAAC;UAAEL,KAAK,EAAE,MAAM;UAAEM,MAAM,EAAE;QAAO,CAAE;QAAAb,QAAA,EAClFf,MAAM,CAAC6B,GAAG,CAAEC,KAAK,IAAK;UACrB,MAAMC,IAAI,GAAGC,QAAQ,CAACC,cAAc,CAAC,SAASH,KAAK,CAACI,QAAQ,EAAE,CAAC;UAC/D,IAAIC,EAAE,GAAG,EAAE;YAAEC,EAAE,GAAG,EAAE;UAEpB,IAAIL,IAAI,EAAE;YACR,MAAMM,WAAW,GAAGN,IAAI,CAACO,cAAc,CAAC,CAAC;YACzC,MAAMC,GAAG,GAAGC,IAAI,CAACC,GAAG,CAACX,KAAK,CAACY,WAAW,GAAG,EAAE,EAAEL,WAAW,CAAC,CAAC,CAAC;YAC3D,MAAMM,KAAK,GAAGZ,IAAI,CAACa,gBAAgB,CAACL,GAAG,CAAC;YACxCJ,EAAE,GAAGQ,KAAK,CAACE,CAAC;YACZT,EAAE,GAAGO,KAAK,CAACG,CAAC;UACd;UAEA,oBACEjD,OAAA;YAA6BsC,EAAE,EAAEA,EAAG;YAACC,EAAE,EAAEA,EAAG;YAACW,CAAC,EAAE,CAAE;YAACC,IAAI,EAAC,KAAK;YAAAjC,QAAA,eAC3DlB,OAAA;cAAAkB,QAAA,GAAO,QACC,EAACe,KAAK,CAACmB,QAAQ,EAAC,UAAG,EAACnB,KAAK,CAACY,WAAW,CAACQ,OAAO,CAAC,CAAC,CAAC,EAAC,QAAM,EAACpB,KAAK,CAACqB,UAAU,EAAC,OACjF;YAAA;cAAAnC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO;UAAC,GAHGW,KAAK,CAACmB,QAAQ;YAAAjC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAInB,CAAC;QAEb,CAAC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpB,EAAA,CAlDuBD,UAAU;AAAAsD,EAAA,GAAVtD,UAAU;AAAA,IAAAsD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}